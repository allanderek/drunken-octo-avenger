<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <!-- Bootstrap Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<link href="/static/index.css" rel="stylesheet" type="text/css">
<!-- following meta is needed by Persona -->
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>Go</title>
<style>
body {
  padding-top: 50px;
}
.lead-content {
  padding: 40px 15px;
  text-align: center;
}
</style>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Tesuji Charm</a>
    </div><!-- /.navbar-header -->
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        {% set active_page = active_page if active_page is defined else '' %}
        <li {% if active_page == 'frontpage' %} class="active"{% endif%}>
            <a href="{{ url_for('front_page') }}">Welcome</a></li>
        <li {% if active_page == 'status' %} class="active"{% endif%}>
            <a href="{{url_for('status')}}">Status</a></li>
        <li{% if active_page == 'challenge' %} class="active"{% endif%}>
            <a href="{{ url_for('challenge') }}" id='challenge_link'>Challenge</a></li>
        {% if not current_user %}
        <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sign in with: <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#" id="persona_login">Persona</a></li>
                </ul>
        </li>
        {% endif %}<!-- end not current_user -->
      </ul>
      {% if current_user %}
        <div class="logged_in_user">Logged in as: {{ current_user }}</div>
        {% if current_persona_email %}
         <a href="#" id="logout">Log out</a>
        {% else %}  <!-- else current_persona_email -->
         <a href="/logout" id="logout">Log out</a>
        {% endif %}  <!-- end current_persona_email -->
      {% else %}  <!-- else current_user -->
      <div class="sign_in">
        <a id="new_account" href="{{ url_for('create_account') }}">Sign up</a>
        or sign in:
        <form id="login_form" class="navbar-form pull-right"
        action="{{ url_for('login') }}" method="POST">
          {{ login_form.hidden_tag() }}
          {{ login_form.username(size=15, placeholder=login_form.username.description) }}
          {{ login_form.password(size=15, placeholder=login_form.password.description) }}
          <input id="login_submit" type="submit" name="login" value="Login" \>
        </form>
      </div> <!-- /.sign_in -->
      {% endif %}<!-- end current_user -->
    </div><!--/.nav-collapse -->
  </div><!-- /.container -->
</nav>

<div class="container">
<div class="lead-content">
{% with messages = get_flashed_messages(with_categories=true) %}
<div class="alert alert-danger alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  Caution: the site you are viewing is very much a site in the initial stages of
  development. The goal is to eventually have a web site suitable for turn-based
  Go games. We are not there yet, and things will likely change. You can start a
  game against a friend, but there is a chance that your game will simply be
  dropped at some point. This is very much, use with no expectations.
</div>
   {% if messages %}
     {% for category, message in messages %}

       <div class="alert alert-{{category|flash_bootstrap_category}} alert-dismissible" role="alert">
         <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         {{message}}
       </div><!-- /.alert -->
     {% endfor %}
   {% endif %}<!-- end if messages -->
{% endwith %}<!-- end with messages -->

{% block lead_content %}
{% endblock %}
</div><!-- /.lead-content -->

{% block content %}
{% endblock %}

</div>
<script>
window.tesuji_charm = {
    currentUserEmail: "{{ current_user }}",
    currentPersonaEmail: "{{ current_persona_email }}",
};
</script>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<!-- Bootstrap Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script src="https://login.persona.org/include.js"></script>
<script src="/static/compiled-js/persona.js"></script>
<script>
tesuji_charm.persona.initialize(navigator);
</script>
{% block page_scripts %}
{% endblock %}
</body>
</html>
